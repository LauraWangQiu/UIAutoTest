# UIAutoTest

> Authors:  
> Paula Alemany Rodríguez  
> Pablo Iglesias Rodrigo  
> Andrés García Navarro  
> Cristina Mora Velasco  
> Francisco Miguel Galván Muñoz  
> Yi (Laura) Wang Qiu  

UI Automatization tests using [Sikulix](https://sikulix.github.io/docs/) and python scripts.

## Prerequisites

> [!IMPORTANT]
> Sikulix needs the whole machine: mouse cursor, keyboard and an unlocked screen for test automatization. Do not expect to use your PC in the usual way.

As stated in the [Sikulix's official documentation](https://sikulix.github.io/docs/start/installation), you will need:

- Windows, macOS or Linux
- Java 8+ installed
- All 64-bit version

For this project, it will be developed and only tested for Windows systems. Please read the documentation from the web above for more information.

Additionally, [Python](https://www.python.org/downloads/) will be used as the scripting language to interact with the Sikulix API.

### Other aspects

> [!NOTE]
> All the images must have sufficient quality to be clicked and displayed in the executable large enough. Image captures should be taken from the machine where it will run the tests.

> [!NOTE]
> Screen resolution must be on 100% without scaling.

### Download Sikulix API and Jython

```py
python downloadDependencies.py
```

### Install Python packages requirements

```cmd
pip install -r requirements.txt
```

## Try it

```ps
python UIAutoTest.py <config.json>
```

If `config.json` is passed as an argument, it will not create an interface.

The variables in `config.json` are the following:

- `java_path`: path to java, if added to environment variables: `java`
- `jython_jar`: path to jython.jar, you can download by it executing [downloadDependencies.py](downloadDependencies.py), it is set to `jython-standalone-2.7.4.jar` by default
- `sikulix_jar`: path to jython.jar, it is also downloaded by it executing [downloadDependencies.py](downloadDependencies.py), it is set to `sikulixapi-2.0.5.jar` by default
- `images_dir`: path to used images to generate the graph, it is set to `imgs` by default
- `tests_dir`: path to designed tests to study the generated graph, it is set to `tests` by default
- `theorical_graph_file`: name of the theorical graph (the graph which represents how it should be the menu flow), it is set to `graph.txt` by default. You can create the file by hand using the interface we provide by executing [UIAutoTest.py](UIAutoTest.py)
- `practical_graph_file`: name of the graph generated by the automated framework, it is set to `output_graph.txt` by default
- `generate_graph`: set to `true` by default to generate graph, do the tests if defined in `tests_to_run` and compare `theorical_graph_file` with `practical_graph_file`. If set to `false`, it makes the tests if defined and compares.
- `selected_executable`: path to executable, it is set to `bin/Sample/My project.exe` by default to try the example.
- `executable_delay`: time in seconds to determine that executable has started to be evaluated by automation, it is set to `5` by default
- `timeout`: time in seconds that Sikulix will wait to find the image on screen
- `initial_similarity`: the initial similarity value (from 0 to 1) used to start searching for images on the screen with Sikulix. A value of 1 means an exact match is required; 0 means no similarity is required
- `min_similarity`: the minimum similarity value (from 0 to 1) allowed when searching for images on the screen with Sikulix. If no image is found with the initial similarity, the search will continue decreasing the similarity down to this minimum value
- `similarity_step`: the amount by which the similarity value is decreased in each step when searching for images on the screen. The search starts at `initial_similarity` and decreases by this value until reaching `min_similarity`
- `tests_to_run`: lists of tests to run, the names of the tests classes must be given and should be located in `tests_dir`, we provide the following tests: [`EdgePairCovTest`, `PrimePathCovTest`, `SelfLoopTest`, `TotalConnectTest`]
- `solution_file`: name of the final report file, it is set to `solution.txt` by default
